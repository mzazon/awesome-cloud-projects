# ==============================================================================
# TERRAFORM VARIABLES CONFIGURATION EXAMPLE
# ==============================================================================
# Copy this file to terraform.tfvars and update the values below with your
# specific configuration. This file contains all the required and optional
# variables needed to deploy the daily status reports infrastructure.

# ==============================================================================
# REQUIRED VARIABLES - MUST BE CONFIGURED
# ==============================================================================

# Your GCP project ID where resources will be created
project_id = "your-gcp-project-id"

# GCP region for resource deployment
region = "us-central1"

# Email configuration for status reports
sender_email     = "your-sender@gmail.com"
sender_password  = "your-gmail-app-password"  # Use app password, not regular password
recipient_email  = "admin@yourcompany.com"

# ==============================================================================
# OPTIONAL VARIABLES - CAN BE CUSTOMIZED
# ==============================================================================

# Environment designation
environment = "prod"

# Resource naming (random suffixes will be added automatically)
function_name        = "daily-status-report"
service_account_name = "status-reporter"
job_name            = "daily-report-trigger"

# Scheduling configuration
cron_schedule = "0 9 * * *"  # Daily at 9 AM
timezone     = "UTC"

# Function configuration
function_memory  = 256
function_timeout = 60

# Monitoring configuration
monitoring_period_hours = 24
include_cost_analysis   = false
include_security_insights = false

# Advanced configuration
enable_vpc_connector = false
vpc_connector_name   = ""
max_instances       = 10

# Resource labeling
additional_labels = {
  department = "platform"
  owner      = "devops-team"
}
cost_center = "infrastructure"
team_owner  = "platform-team"

# ==============================================================================
# CONFIGURATION EXAMPLES FOR DIFFERENT SCENARIOS
# ==============================================================================

# Example 1: Development Environment
# environment = "dev"
# function_memory = 128
# monitoring_period_hours = 12
# cron_schedule = "0 */6 * * *"  # Every 6 hours for dev testing

# Example 2: Production Environment with Enhanced Features
# environment = "prod"
# function_memory = 512
# include_cost_analysis = true
# include_security_insights = true
# max_instances = 5
# additional_labels = {
#   criticality = "high"
#   backup      = "required"
#   compliance  = "required"
# }

# Example 3: Multi-Region Setup
# region = "europe-west1"
# timezone = "Europe/London"
# cron_schedule = "0 8 * * *"  # 8 AM London time

# Example 4: High-Frequency Monitoring (for testing)
# cron_schedule = "*/30 * * * *"  # Every 30 minutes
# monitoring_period_hours = 1

# ==============================================================================
# EMAIL CONFIGURATION GUIDANCE
# ==============================================================================

# Gmail App Password Setup:
# 1. Enable 2-factor authentication on your Gmail account
# 2. Go to Google Account settings > Security > App passwords
# 3. Generate a new app password for "Mail"
# 4. Use this 16-character password as sender_password
# 5. Do NOT use your regular Gmail password

# Alternative SMTP Providers:
# For Outlook/Hotmail:
# - SMTP Server: smtp-mail.outlook.com
# - Port: 587
# - Update the Python code accordingly

# For custom SMTP servers:
# - Update SMTP_SERVER and SMTP_PORT in the Python function code
# - Ensure firewall rules allow outbound SMTP traffic

# ==============================================================================
# SECURITY BEST PRACTICES
# ==============================================================================

# 1. Never commit terraform.tfvars to version control
# 2. Use environment variables for sensitive values:
#    export TF_VAR_sender_password="your-app-password"
# 3. Consider using Google Secret Manager for password storage
# 4. Regularly rotate Gmail app passwords
# 5. Use least-privilege IAM roles

# Environment variable examples:
# export TF_VAR_project_id="your-project-id"
# export TF_VAR_sender_email="your-email@gmail.com"
# export TF_VAR_sender_password="your-app-password"
# export TF_VAR_recipient_email="admin@company.com"

# ==============================================================================
# COST OPTIMIZATION TIPS
# ==============================================================================

# 1. Use smaller function memory for basic reporting (128-256MB)
# 2. Set appropriate max_instances to control costs
# 3. Consider less frequent scheduling for non-critical environments
# 4. Enable cost analysis to track resource spending
# 5. Use lifecycle rules on storage buckets to manage costs

# ==============================================================================
# TROUBLESHOOTING COMMON CONFIGURATION ISSUES
# ==============================================================================

# Issue: "Project not found" error
# Solution: Verify project_id is correct and you have access

# Issue: "Region not found" error  
# Solution: Use valid GCP region names (e.g., us-central1, europe-west1)

# Issue: Email sending failures
# Solution: Verify Gmail app password and sender email configuration

# Issue: Function timeout errors
# Solution: Increase function_timeout value (max 540 seconds)

# Issue: Permission denied errors
# Solution: Ensure you have Owner or Editor role on the GCP project